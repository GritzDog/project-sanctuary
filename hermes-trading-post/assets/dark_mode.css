/* Dark Mode CSS for Alpaca Trader Dashboard */

/* CSS Variables for consistent theming */
:root {
  --bg-primary: #0f172a;         /* Dark blue-black background */
  --bg-secondary: #1e293b;       /* Slightly lighter for cards/sidebar */
  --bg-tertiary: #334155;        /* Even lighter for hover states */
  --text-primary: #f8fafc;       /* Almost white text */
  --text-secondary: #cbd5e1;     /* Light grey text */
  --text-muted: #64748b;         /* Muted grey text */
  --neon-blue: #38bdf8;          /* Primary accent color - sky blue */
  --neon-orange: #fb923c;        /* Secondary accent - orange */
  --border-color: #475569;       /* Border color */
  --success-color: #22c55e;      /* Green for success states */
  --warning-color: #f59e0b;      /* Amber for warning states */
  --danger-color: #ef4444;       /* Red for danger states */
}

/* Base body and app styling */
body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

#app-container,
.dash-bootstrap {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

/* Card styling - remove white backgrounds and borders */
.card {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease !important;
}

.card-header {
  background-color: var(--bg-tertiary) !important;
  border-bottom: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease !important;
}

.card-body {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

/* Remove white backgrounds from all containers */
.container,
.container-fluid,
.row,
.col,
[class*="col-"] {
  background-color: transparent !important;
  transition: background-color 0.3s ease !important;
}

/* Dropdown styling - fix white dropdown background */
.dropdown-menu {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease !important;
}

.dropdown-item {
  color: var(--text-primary) !important;
  background-color: transparent !important;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

.dropdown-item:hover,
.dropdown-item:focus {
  background-color: var(--bg-tertiary) !important;
  color: var(--neon-blue) !important;
}

/* Select dropdown styling */
.Select-control {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease !important;
}

.Select-menu-outer {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease !important;
}

.Select-option {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

.Select-option:hover {
  background-color: var(--bg-tertiary) !important;
  color: var(--neon-blue) !important;
}

/* Dash Core Components dropdown */
.dash-dropdown .Select-control {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease !important;
}

.dash-dropdown .Select-menu {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease !important;
}

.dash-dropdown .Select-option {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

.dash-dropdown .Select-option:hover {
  background-color: var(--bg-tertiary) !important;
  color: var(--neon-blue) !important;
}

.dash-dropdown .Select-value-label {
  color: var(--text-primary) !important;
  transition: color 0.3s ease !important;
}

/* More specific dropdown styling for Dash components */
._dash-dropdown .Select-control,
.dash-dropdown .Select-control,
div[class*="dropdown"] .Select-control,
.dropdown .Select-control {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
}

._dash-dropdown .Select-menu-outer,
.dash-dropdown .Select-menu-outer,
div[class*="dropdown"] .Select-menu-outer,
.dropdown .Select-menu-outer {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3) !important;
}

._dash-dropdown .Select-option,
.dash-dropdown .Select-option,
div[class*="dropdown"] .Select-option,
.dropdown .Select-option {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

._dash-dropdown .Select-option:hover,
.dash-dropdown .Select-option:hover,
div[class*="dropdown"] .Select-option:hover,
.dropdown .Select-option:hover {
  background-color: var(--bg-tertiary) !important;
  color: var(--neon-blue) !important;
}

._dash-dropdown .Select-value-label,
.dash-dropdown .Select-value-label,
div[class*="dropdown"] .Select-value-label,
.dropdown .Select-value-label {
  color: var(--text-primary) !important;
}

/* Fix any React Select components */
.css-1hwfws3,
.css-15lsz6c-indicatorContainer,
.css-1okebmr-indicatorSeparator,
.css-tlfecz-indicatorContainer {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

/* Fix the timeframe selector specifically */
#timeframe-selector .Select-control,
#timeframe-selector .Select-menu-outer,
#timeframe-selector .Select-option {
  background-color: var(--bg-secondary) !important;
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
}

/* Navigation links styling */
.nav-link {
  color: var(--text-secondary) !important;
  border: none !important;
  transition: all 0.3s ease;
}

.nav-link:hover {
  color: var(--neon-blue) !important;
  background-color: var(--bg-tertiary) !important;
}

.nav-link.active {
  color: var(--neon-blue) !important;
  background-color: var(--bg-tertiary) !important;
  border-left: 3px solid var(--neon-blue) !important;
}

/* Buttons styling */
.btn {
  border: 1px solid var(--border-color) !important;
  transition: all 0.3s ease;
}

.btn-primary {
  background-color: var(--neon-blue) !important;
  border-color: var(--neon-blue) !important;
  color: white !important;
}

.btn-primary:hover {
  background-color: #0ea5e9 !important;
  border-color: #0ea5e9 !important;
}

.btn-outline-primary {
  border-color: var(--neon-blue) !important;
  color: var(--neon-blue) !important;
  background-color: transparent !important;
}

.btn-outline-primary:hover {
  background-color: var(--neon-blue) !important;
  color: white !important;
}

/* Badge styling */
.badge {
  border: 1px solid transparent;
}

.badge.bg-success {
  background-color: var(--success-color) !important;
  color: white !important;
}

.badge.bg-warning {
  background-color: var(--warning-color) !important;
  color: white !important;
}

.badge.bg-danger {
  background-color: var(--danger-color) !important;
  color: white !important;
}

/* Text styling - use light blue for ticker text */
.text-muted {
  color: var(--text-muted) !important;
  transition: color 0.3s ease !important;
}

.text-primary {
  color: var(--neon-blue) !important;
  transition: color 0.3s ease !important;
}

.text-secondary {
  color: var(--text-secondary) !important;
  transition: color 0.3s ease !important;
}

/* Fix ticker text color specifically */
.crypto-ticker,
.ticker-symbol {
  color: var(--neon-blue) !important;
  transition: color 0.3s ease !important;
}

/* Live price colors - bullish/bearish */
.price-bullish {
  color: #26a69a !important;
  font-weight: bold !important;
}

.price-bearish {
  color: #ef5350 !important;
  font-weight: bold !important;
}

/* Force Plotly annotation colors */
.annotation text,
.annotation-text,
g.hv-annotation text {
  fill: currentColor !important;
}

/* Remove white underlines under tickers */
.crypto-ticker,
.ticker-symbol {
  text-decoration: none !important;
  border-bottom: none !important;
}

/* Table styling */
.table {
  background-color: transparent !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

.table td,
.table th {
  border-color: var(--border-color) !important;
  color: var(--text-primary) !important;
  transition: border-color 0.3s ease, color 0.3s ease !important;
}

.table-dark {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

/* Form controls */
.form-control {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease !important;
}

.form-control:focus {
  background-color: var(--bg-secondary) !important;
  border-color: var(--neon-blue) !important;
  box-shadow: 0 0 0 0.2rem rgba(56, 189, 248, 0.25) !important;
  color: var(--text-primary) !important;
}

/* Enhanced Switch styling for dark mode toggle */
.form-check-input:checked {
  background-color: var(--neon-blue) !important;
  border-color: var(--neon-blue) !important;
  box-shadow: 0 0 10px rgba(56, 189, 248, 0.5) !important;
}

.form-check-input {
  background-color: var(--bg-tertiary) !important;
  border: 2px solid var(--border-color) !important;
  transition: all 0.3s ease !important;
  width: 2.5rem !important;
  height: 1.25rem !important;
}

.form-check-input:focus {
  border-color: var(--neon-blue) !important;
  box-shadow: 0 0 0 0.2rem rgba(56, 189, 248, 0.25) !important;
}

/* Dark mode toggle container styling */
.form-check {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Enhanced icons for dark mode toggle */
.bi-moon-fill,
.bi-sun-fill {
  transition: color 0.3s ease, transform 0.3s ease !important;
  filter: drop-shadow(0 0 3px currentColor) !important;
}

.bi-moon-fill:hover,
.bi-sun-fill:hover {
  transform: scale(1.1) !important;
  filter: drop-shadow(0 0 6px currentColor) !important;
}

/* Dark mode toggle row styling */
.align-items-center {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
}

/* Add glow effect to toggle switch */
#dark-mode-switch {
  filter: drop-shadow(0 0 2px rgba(56, 189, 248, 0.3)) !important;
}

/* Sidebar specific styling */
#sidebar {
  background-color: var(--bg-secondary) !important;
  border-right: 2px solid var(--border-color) !important;
  transition: background-color 0.3s ease, border-color 0.3s ease, width 0.3s ease !important;
}

/* Collapsed sidebar styling - show only icons */
#sidebar[style*="width: 4rem"] {
  text-align: center;
}

/* Hide text in collapsed sidebar but keep icons visible */
#sidebar[style*="width: 4rem"] .nav-link span,
#sidebar[style*="width: 4rem"] h3,
#sidebar[style*="width: 4rem"] h5,
#sidebar[style*="width: 4rem"] p,
#sidebar[style*="width: 4rem"] .text-muted,
#sidebar[style*="width: 4rem"] hr {
  display: none !important;
}

/* Keep icons visible and centered in collapsed sidebar */
#sidebar[style*="width: 4rem"] .bi {
  display: inline-block !important;
  font-size: 1.5rem !important;
  margin: 0 !important;
}

/* Adjust navigation links in collapsed state */
#sidebar[style*="width: 4rem"] .nav-link {
  padding: 0.75rem 0.5rem !important;
  text-align: center !important;
  border-radius: 0.375rem !important;
  margin-bottom: 0.5rem !important;
}

/* Style the dark mode toggle in collapsed sidebar */
#sidebar[style*="width: 4rem"] .form-check {
  display: flex !important;
  justify-content: center !important;
  margin: 0 !important;
}

/* Keep toggle button visible but remove text */
#sidebar[style*="width: 4rem"] .form-check-label,
#sidebar[style*="width: 4rem"] .small {
  display: none !important;
}

/* Position hamburger menu properly in collapsed state */
#sidebar[style*="width: 4rem"] #sidebar-toggle {
  position: relative !important;
  top: auto !important;
  right: auto !important;
  margin: 0.5rem auto 1rem auto !important;
  display: block !important;
}

/* Ensure proper spacing in collapsed sidebar */
#sidebar[style*="width: 4rem"] .nav {
  padding: 0 !important;
  margin-top: 1rem !important;
}

/* Main content area */
#main-content {
  background-color: var(--bg-primary) !important;
  transition: background-color 0.3s ease, margin-left 0.3s ease !important;
}

/* Ensure all page containers have smooth transitions */
.container,
.container-fluid {
  transition: background-color 0.3s ease, color 0.3s ease !important;
}

/* Add transitions to all dashboard components */
.draggable-card,
.movable-card {
  transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease !important;
}

/* Plotly chart containers - ensure proper background */
.plotly {
  background-color: transparent !important;
}

.main-svg {
  background-color: transparent !important;
}

/* Plotly chart text styling for dark mode */
.plotly .gtitle,
.plotly .xtitle,
.plotly .ytitle,
.plotly .g-xtitle,
.plotly .g-ytitle,
.plotly .g-gtitle {
  fill: var(--text-primary) !important;
}

/* Plotly axis text and ticks */
.plotly .xaxislayer-above text,
.plotly .yaxislayer-above text,
.plotly .xtick text,
.plotly .ytick text,
.plotly .tick text {
  fill: var(--text-primary) !important;
}

/* Plotly legend text */
.plotly .legend text,
.plotly .legendtext {
  fill: var(--text-primary) !important;
}

/* Plotly hover labels */
.plotly .hovertext,
.plotly .hoverlayer text {
  fill: var(--text-primary) !important;
}

/* Global Plotly styling override */
.js-plotly-plot .plotly .main-svg {
  color: var(--text-primary) !important;
}

/* Fix any remaining dark text in charts */
svg text {
  fill: var(--text-primary) !important;
}

/* Ensure chart backgrounds are transparent */
.svg-container {
  background-color: transparent !important;
}

/* Fix for any remaining white backgrounds */
div[style*="background-color: white"],
div[style*="background-color: #ffffff"],
div[style*="background-color: #fff"] {
  background-color: var(--bg-secondary) !important;
}

/* Fix Bootstrap modal backgrounds if any */
.modal-content {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
}

.modal-header {
  border-bottom: 1px solid var(--border-color) !important;
}

.modal-footer {
  border-top: 1px solid var(--border-color) !important;
}

/* Fix any popover or tooltip backgrounds */
.popover {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
}

.tooltip-inner {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
}

/* Alert styling */
.alert {
  border: 1px solid var(--border-color) !important;
}

.alert-success {
  background-color: rgba(34, 197, 94, 0.1) !important;
  border-color: var(--success-color) !important;
  color: var(--success-color) !important;
}

.alert-warning {
  background-color: rgba(245, 158, 11, 0.1) !important;
  border-color: var(--warning-color) !important;
  color: var(--warning-color) !important;
}

.alert-danger {
  background-color: rgba(239, 68, 68, 0.1) !important;
  border-color: var(--danger-color) !important;
  color: var(--danger-color) !important;
}

/* Ensure consistent light blue theme throughout */
h1, h2, h3, h4, h5, h6 {
  color: var(--text-primary) !important;
  transition: color 0.3s ease !important;
}

/* Add global transition for all elements that might change color */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* Light mode overrides (when light-mode class is added to body) */
body.light-mode {
  --bg-primary: #ffffff;
  --bg-secondary: #f8fafc;
  --bg-tertiary: #e2e8f0;
  --text-primary: #1e293b;
  --text-secondary: #475569;
  --text-muted: #64748b;
  --border-color: #cbd5e1;
}

/* Clickable theme toggle button styling */
#theme-toggle-btn {
  border: none !important;
  background: transparent !important;
  transition: all 0.3s ease !important;
  border-radius: 50% !important;
  width: 3rem !important;
  height: 3rem !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

#theme-toggle-btn:hover {
  background-color: var(--bg-tertiary) !important;
  transform: scale(1.1) !important;
  box-shadow: 0 0 15px rgba(56, 189, 248, 0.3) !important;
}

#theme-toggle-btn:active {
  transform: scale(0.95) !important;
}

/* Settings button styling */
#settings-btn {
  border: none !important;
  background: transparent !important;
  transition: all 0.3s ease !important;
  border-radius: 50% !important;
  width: 3rem !important;
  height: 3rem !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  opacity: 0.6 !important;
}

#settings-btn:hover:not(:disabled) {
  background-color: var(--bg-tertiary) !important;
  transform: scale(1.1) !important;
  opacity: 1 !important;
}

/* Theme toggle container styling for collapsed sidebar */
#sidebar[style*="width: 4rem"] #theme-toggle-btn,
#sidebar[style*="width: 4rem"] #settings-btn {
  width: 2.5rem !important;
  height: 2.5rem !important;
  margin: 0.25rem !important;
}

#sidebar[style*="width: 4rem"] #theme-label {
  display: none !important;
}

/* Enhanced button focus states */
#theme-toggle-btn:focus,
#settings-btn:focus {
  outline: none !important;
  box-shadow: 0 0 0 2px var(--neon-blue) !important;
}

/* Icon animation on theme change */
#theme-icon {
  transition: all 0.3s ease !important;
}

#theme-toggle-btn:hover #theme-icon {
  transform: rotate(15deg) !important;
}

/* Plotly hover tooltip styling for dark mode */
.hoverlayer .hovertext {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
}

.hoverlayer .hovertext .name {
  color: var(--text-primary) !important;
}

.hoverlayer .hovertext path {
  fill: var(--bg-secondary) !important;
  stroke: var(--border-color) !important;
}

/* Fix Plotly modebar (toolbar) in dark mode */
.modebar-group {
  background-color: var(--bg-secondary) !important;
}

.modebar-btn {
  color: var(--text-secondary) !important;
  fill: var(--text-secondary) !important;
}

.modebar-btn:hover {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

/* Fix Plotly legend in dark mode */
.legend {
  background-color: var(--bg-secondary) !important;
  border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important;
}

.legendtext {
  fill: var(--text-primary) !important;
}